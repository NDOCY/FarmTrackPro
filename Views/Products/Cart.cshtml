@model List<FarmTrack.Models.CartItem>
@{ 
    if (Session["Role"] != null && (Session["Role"].ToString() == "Admin" || Session["Role"].ToString() == "Owner"))
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/_Layout - User.cshtml";
    }
}


<style>
    :root {
        --color-earth: #8B7355;
        --color-soil: #654321;
        --color-foliage: #4CAF50;
        --color-wheat: #F5DEB3;
        --color-hay: #DAA520;
        --color-danger: #FF6B6B;
        --color-white: #FFFFFF;
        --border-radius: 12px;
        --card-shadow: 0 6px 18px rgba(0,0,0,0.1);
    }

    body {
        background-color: #F9F7F4;
    }

    /* Page Header */
    .page-header {
        background: linear-gradient(135deg, var(--color-earth) 0%, var(--color-soil) 100%);
        border-radius: var(--border-radius);
        padding: 30px;
        margin-bottom: 30px;
        color: white;
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
    }

    .page-header::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 300px;
        height: 100%;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FFFFFF" opacity="0.1"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>');
        background-repeat: no-repeat;
        background-position: right center;
        background-size: 250px;
        opacity: 0.15;
    }

    .page-header h2 {
        font-size: 2rem;
        font-weight: 700;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    /* Alerts */
    .alert {
        border-radius: 8px;
        border: none;
        padding: 15px 20px;
        margin-bottom: 25px;
    }

    .alert-success {
        background: rgba(76, 175, 80, 0.1);
        color: #155724;
        border-left: 4px solid var(--color-foliage);
    }

    .alert-danger {
        background: rgba(255, 107, 107, 0.1);
        color: #721c24;
        border-left: 4px solid var(--color-danger);
    }

    .alert-info {
        background: rgba(23, 162, 184, 0.1);
        color: #0c5460;
        border-left: 4px solid #17a2b8;
    }

    /* Table Container */
    .table-container {
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
        overflow: hidden;
        margin-bottom: 25px;
    }

    .table-container::before {
        content: '';
        display: block;
        height: 4px;
        background: linear-gradient(90deg, var(--color-earth), var(--color-foliage));
    }

    /* Table */
    .modern-table {
        width: 100%;
        border-collapse: collapse;
        margin: 0;
    }

    .modern-table thead {
        background: linear-gradient(135deg, var(--color-earth), var(--color-soil));
        color: white;
    }

    .modern-table thead th {
        padding: 18px 15px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.85rem;
    }

    .modern-table tbody tr {
        border-bottom: 1px solid #f0f0f0;
        transition: all 0.2s;
    }

    .modern-table tbody tr:hover {
        background-color: rgba(139, 115, 85, 0.05);
    }

    .modern-table td {
        padding: 15px;
        font-size: 0.95rem;
        vertical-align: middle;
    }

    .modern-table tfoot {
        background: rgba(139, 115, 85, 0.05);
        font-weight: 600;
    }

    /* Buttons */
    .btn {
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.9rem;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: none;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-success {
        background: linear-gradient(135deg, var(--color-foliage), #45a049);
        color: white;
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
    }

    .btn-warning {
        background: linear-gradient(135deg, var(--color-hay), #f0ad4e);
        color: white;
        box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
    }

    .btn-danger {
        background: linear-gradient(135deg, var(--color-danger), #e74c3c);
        color: white;
        box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
    }

    .btn-secondary, .btn-outline-secondary {
        background: linear-gradient(135deg, #9e9e9e, #757575);
        color: white;
        box-shadow: 0 4px 12px rgba(158, 158, 158, 0.3);
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }

    .btn-sm {
        padding: 6px 12px;
        font-size: 0.85rem;
    }

    .btn-lg {
        padding: 14px 28px;
        font-size: 1.05rem;
    }

    /* Action Buttons Group */
    .action-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 20px;
    }

    /* Empty State */
    .empty-cart {
        text-align: center;
        padding: 80px 20px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
    }

    .empty-cart i {
        font-size: 5rem;
        color: var(--color-wheat);
        margin-bottom: 25px;
    }

    .empty-cart h4 {
        color: var(--color-soil);
        margin-bottom: 15px;
        font-weight: 600;
    }

    .empty-cart p {
        color: #999;
        margin-bottom: 30px;
    }

    @@media (max-width: 768px) {
        .page-header h2 {
            font-size: 1.5rem;
        }

        .action-buttons {
            flex-direction: column;
        }

        .action-buttons .btn {
            width: 100%;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .modern-table {
            min-width: 600px;
        }
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<div class="page-header">
    <h2><i class="fas fa-shopping-cart"></i> Your Shopping Cart</h2>
</div>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">
        <i class="fas fa-check-circle"></i> @TempData["Success"]
    </div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">
        <i class="fas fa-exclamation-circle"></i> @TempData["Error"]
    </div>
}

@if (!Model.Any())
{
    <div class="empty-cart">
        <i class="fas fa-shopping-cart"></i>
        <h4>Your cart is empty</h4>
        <p>Start adding products to your cart to see them here.</p>
        <a href="@Url.Action("Store")" class="btn btn-success btn-lg">
            <i class="fas fa-store"></i> Continue Shopping
        </a>
    </div>
}
else
{
    <div class="table-container">
        <table class="modern-table">
            <thead>
                <tr>
                    <th><i class="fas fa-box"></i> Product</th>
                    <th><i class="fas fa-ruler"></i> Unit</th>
                    <th><i class="fas fa-dollar-sign"></i> Price</th>
                    <th><i class="fas fa-layer-group"></i> Quantity</th>
                    <th><i class="fas fa-calculator"></i> Total</th>
                    <th><i class="fas fa-cog"></i> Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td><strong>@item.Name</strong></td>
                        <td>@item.Unit</td>
                        <td>R@(item.PricePerUnit.ToString("F2"))</td>
                        <td>@item.Quantity</td>
                        <td><strong>R @(item.Total.ToString("F2"))</strong></td>
                        <td>
                            <a href="@Url.Action("RemoveFromCart", new { productId = item.ProductId })"
                               class="btn btn-danger btn-sm" title="Remove item">
                                <i class="fas fa-trash"></i> Remove
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="text-end"><strong>Grand Total</strong></td>
                    <td colspan="2"><strong>R @(Model.Sum(i => i.Total).ToString("F2"))</strong></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="action-buttons">
        <a href="@Url.Action("Store")" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Continue Shopping
        </a>
        <a href="@Url.Action("ClearCart")" class="btn btn-warning">
            <i class="fas fa-broom"></i> Clear Cart
        </a>
        <a href="@Url.Action("Checkout")" class="btn btn-success btn-lg">
            <i class="fas fa-credit-card"></i> Proceed to Checkout
        </a>
    </div>
}