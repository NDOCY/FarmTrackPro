@model List<FarmTrack.Models.Equipment>
@{
    ViewBag.Title = "Equipment";
}

<style>
    /* Custom Color Scheme */
    :root {
        --color-earth: #8B7355; /* Primary */
        --color-soil: #654321; /* Secondary */
        --color-foliage: #4CAF50; /* Tertiary */
        --color-wheat: #F5DEB3; /* Accent */
        --color-danger: #FF6B6B; /* Error */
        --color-white: #FFFFFF; /* Neutral */
    }

    /* Page Header */
    .page-header {
        background-color: var(--color-wheat);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .page-header h2 {
        color: var(--color-soil);
        font-weight: 700;
        margin-bottom: 0;
    }

    .page-header p.lead {
        color: var(--color-soil);
        opacity: 0.8;
        margin-bottom: 0;
    }

    /* Filter Container */
    .filter-container {
        background-color: var(--color-white);
        border: 1px solid var(--color-wheat);
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
    }

    .filter-group {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
    }

    .filter-group label {
        color: var(--color-soil);
        font-weight: 500;
        margin-bottom: 0;
    }

    /* Button Styling */
    .btn {
        border-radius: 6px;
        padding: 8px 16px;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .btn-info {
        background-color: var(--color-earth);
        border-color: var(--color-earth);
        color: var(--color-white);
    }

    .btn-info:hover {
        background-color: var(--color-soil);
        border-color: var(--color-soil);
    }

    .btn-secondary {
        background-color: var(--color-wheat);
        border-color: var(--color-wheat);
        color: var(--color-soil);
    }

    .btn-secondary:hover {
        background-color: #e5cca3;
        border-color: #e5cca3;
    }

    /* Form Control Styling */
    .form-control {
        border: 1px solid var(--color-wheat);
        border-radius: 4px;
        padding: 8px;
    }

    .form-control:focus {
        border-color: var(--color-earth);
        box-shadow: 0 0 5px rgba(139, 115, 85, 0.5);
        outline: none;
    }

    /* Card Styling */
    .equipment-card {
        background-color: var(--color-white);
        border: 1px solid var(--color-wheat);
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        cursor: pointer;
        position: relative;
    }

    .equipment-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .equipment-card .card-img-container {
        height: 200px;
        overflow: hidden;
        background-color: #f8f8f8;
    }

    .equipment-card .card-img-top {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .equipment-card:hover .card-img-top {
        transform: scale(1.05);
    }

    .equipment-card .card-body {
        padding: 15px;
    }

    .equipment-card .card-title {
        color: var(--color-soil);
        font-weight: 600;
        margin-bottom: 10px;
        font-size: 1.25rem;
    }

    .equipment-card .card-text {
        color: #555;
        margin-bottom: 8px;
    }

    .equipment-card .card-category {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: var(--color-wheat);
        color: var(--color-soil);
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .equipment-card .card-status {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid var(--color-wheat);
        display: flex;
        justify-content: space-between;
    }

    .equipment-card .status-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .status-active {
        background-color: rgba(76, 175, 80, 0.1);
        color: var(--color-foliage);
    }

    .status-maintenance {
        background-color: rgba(255, 152, 0, 0.1);
        color: #FF9800;
    }

    .status-inactive {
        background-color: rgba(255, 107, 107, 0.1);
        color: var(--color-danger);
    }

    /* No equipment message */
    .no-equipment {
        text-align: center;
        padding: 50px 20px;
        background-color: var(--color-white);
        border-radius: 8px;
        border: 1px solid var(--color-wheat);
        color: var(--color-soil);
    }

    /* Row and Column Classes */
    .row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -15px;
        margin-left: -15px;
    }

    .col-md-4 {
        position: relative;
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
        margin-bottom: 30px;
    }

    @@media (min-width: 768px) {
        .col-md-4 {
            flex: 0 0 33.333333%;
            max-width: 33.333333%;
        }
    }

    /* Utility Classes */
    .mb-3 {
        margin-bottom: 15px;
    }

    .mt-3 {
        margin-top: 15px;
    }
</style>

<!-- Page Header -->
<div class="page-header">
    <h2><i class="fas fa-tools"></i> Equipment</h2>
    <p class="lead">Manage your farm's tools and machinery</p>
</div>

<!-- Filter and Add New Button -->
<div class="filter-container">
    @using (Html.BeginForm("Index", "Equipment", FormMethod.Get))
    {
        <div class="filter-group">
            <label for="category"><i class="fas fa-filter"></i> Filter by Category:</label>
            @Html.DropDownList("category", (SelectList)ViewBag.CategoryFilter, "All Categories", new { onchange = "this.form.submit();", @class = "form-control", style = "width: 250px;" })
        </div>
    }
    <div class="mt-3 mt-md-0">
        <a href="@Url.Action("Create")" class="btn btn-info">
            <i class="fas fa-plus"></i> Add New Equipment
        </a>
    </div>
</div>

<!-- Equipment Cards -->
<div class="row">
    @if (Model.Any())
    {
        foreach (var item in Model)
        {
            <div class="col-md-4">
                <a href="@Url.Action("Details", "Equipment", new { id = item.EquipmentId })" class="text-decoration-none">
                    <div class="equipment-card">
                        @if (!string.IsNullOrEmpty(item.Category))
                        {
                            <div class="card-category">@item.Category</div>
                        }
                        <div class="card-img-container">
                            @if (!string.IsNullOrEmpty(item.ImagePath))
                            {
                                <img class="card-img-top" src="@item.ImagePath" alt="@item.Name" />
                            }
                            else
                            {
                                <img class="card-img-top" src="/Content/Images/equipment-placeholder.jpg" alt="Equipment placeholder" />
                            }
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">@item.Name</h5>
                            <p class="card-text">
                                @if (!string.IsNullOrEmpty(item.Description))
                                {
                                    @(item.Description.Length > 100 ? item.Description.Substring(0, 100) + "..." : item.Description)
                                }
                            </p>
                            <div class="card-status">
                                <span class="status-badge @GetStatusClass(item.Status)">
                                    @item.Status
                                </span>
                                <span class="text-muted">
                                    <i class="fas fa-eye"></i> View Details
                                </span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        }
    }
    else
    {
        <div class="col-12">
            <div class="no-equipment">
                <i class="fas fa-tools fa-3x mb-3"></i>
                <h4>No equipment found</h4>
                <p>Add your first piece of equipment to get started.</p>
                <a href="@Url.Action("Create")" class="btn btn-info mt-3">
                    <i class="fas fa-plus"></i> Add New Equipment
                </a>
            </div>
        </div>
    }
</div>

<!-- Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

@functions {
    public string GetStatusClass(string status)
    {
        if (string.IsNullOrEmpty(status))
            return "status-inactive";

        status = status.ToLower();

        if (status.Contains("active") || status.Contains("operational") || status.Contains("good"))
            return "status-active";
        else if (status.Contains("maintenance") || status.Contains("repair"))
            return "status-maintenance";
        else
            return "status-inactive";
    }
}